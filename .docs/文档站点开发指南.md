# NocoBase 文档站点开发指南

> 本文档整理自 `nocobase/docs` 仓库，用于说明如何在本地开发、预览和贡献 NocoBase 官方文档。

---

## 一、文档仓库说明

### 基本信息
- **仓库地址**：https://github.com/nocobase/docs
- **主要作用**：
  - 存放 NocoBase 官方文档的 Markdown 源文件与配置
  - 提供多语言文档站点的构建与本地预览能力
  - 支持语言：`zh-CN`（中文）、`en-US`（英文）、`fr-FR`（法语）、`ja-JP`（日语）、`ru-RU`（俄语）等

### 使用场景
- 为产品功能或插件编写/修改官方文档
- 在本地预览文档效果，验证内容结构与导航逻辑
- 多语言文档的翻译与校对

---

## 二、本地开发环境准备

### 1. 克隆文档仓库

```bash
git clone https://github.com/nocobase/docs.git
cd docs
```

### 2. 安装依赖

文档仓库与主仓库（`nocobase/nocobase`）保持一致，使用 **Yarn** 作为包管理工具：

```bash
yarn install
```

---

## 三、本地运行文档站

### 启动命令

根据需要预览的语言，选择对应的命令：

| 语言 | 命令 | 说明 |
|------|------|------|
| 中文 | `yarn dev` | 默认推荐，运行中文文档站 |
| 英文 | `yarn dev:en` | 运行英文文档站 |
| 法语 | `yarn dev:fr` | 运行法语文档站 |
| 日语 | `yarn dev:ja` | 运行日语文档站 |
| 俄语 | `yarn dev:ru` | 运行俄语文档站 |

### 重要提示

> ⚠️ **注意**：
> - `yarn dev` 和 `yarn dev:en` 等命令**不能同时运行**（共用同一端口，每次只能启动一个语言的 dev server）。
> - 在多语言环境下调试文档时，请一次只启动一个语言的 dev 命令。

---

## 四、与主仓库的关系

### 仓库分工

| 仓库 | 职责 | 典型内容 |
|------|------|----------|
| **主仓库**<br>`nocobase/nocobase` | 核心代码、插件体系、示例 | 实际功能实现、API 代码、测试用例、配置脚本等 |
| **文档仓库**<br>`nocobase/docs` | 官方文档站点 | Markdown 文档、多语言翻译、导航配置、文档站构建脚本 |

### 文档与主仓库知识库的对应关系

文档仓库的内容**对应**主仓库知识库（repo wiki）中的各章节，例如：

- **安装指南**：Docker 安装、CLI 安装、源码安装
- **核心概念**：数据模型驱动、插件架构、访问控制、资源管理
- **数据建模**：集合管理、字段类型、关系建模
- **工作流自动化**：工作流设计指南、执行监控
- **AI 集成**：AI 功能指南、安全控制
- **部署与配置**：Docker 部署、Kubernetes 部署、系统配置
- **API 参考**：数据 API、用户与权限 API、工作流 API 等

### 维护流程建议

当主仓库有功能或配置变更时，建议按以下顺序同步更新：

1. **更新主仓库知识库（repo wiki）**  
   - 同步更新设计文档、架构说明、最佳实践等内部知识条目

2. **更新文档仓库（`nocobase/docs`）**  
   - 在对应语言目录下修改 Markdown 文档
   - 使用 `yarn dev` 或其他语言命令本地预览
   - 检查导航、链接、代码示例与截图是否与当前版本一致

3. **提交 PR 至文档仓库**  
   - 在 PR 描述中注明对应的功能变更或主仓库 PR 链接
   - 说明文档路径与语言版本

---

## 五、贡献文档的基本流程

如果你希望为 NocoBase 官方文档贡献内容，可参考以下步骤：

### 1. 新建或修改 Markdown 文档
- 在 `nocobase/docs` 仓库对应语言目录下找到或创建目标文档
- 使用规范的 Markdown 语法编写内容

### 2. 本地预览
- 启动对应语言的文档站（如 `yarn dev`）
- 在浏览器中检查：
  - 导航是否正确
  - 链接是否可用
  - 代码示例是否可运行
  - 截图与当前版本是否一致

### 3. 提交 Pull Request
- Fork 文档仓库并提交变更
- 在 PR 描述中注明：
  - 对应的功能或主仓库 PR 链接
  - 文档语言与路径
  - 变更原因与影响范围

### 4. Code Review
- 文档维护团队会审查内容准确性、语言规范性与格式一致性
- 根据反馈修改后合并

---

## 六、常见问题

### Q1：如何切换文档语言？
A：停止当前运行的 dev server，然后执行对应语言的命令（如 `yarn dev:en` 切换到英文）。

### Q2：文档站构建失败怎么办？
A：检查以下几点：
- 是否正确安装了依赖（`yarn install`）
- Markdown 语法是否有误（特别是代码块、链接格式）
- 导航配置文件是否正确

### Q3：如何确认文档变更已生效？
A：在本地 dev server 中访问对应页面，刷新浏览器查看实时效果。文档站支持热更新，修改保存后即可在浏览器中看到变化。

---

## 七、相关资源

- **文档仓库**：https://github.com/nocobase/docs
- **主仓库**：https://github.com/nocobase/nocobase
- **官方文档站**：https://docs.nocobase.com/
- **社区讨论**：https://github.com/nocobase/nocobase/discussions

---

**最后更新时间**：2025-12-26
